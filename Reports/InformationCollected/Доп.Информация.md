- 1. Использование архитектуры, основанной на сервисах

  Архитектура, основанная на сервисах, - это паттерн программной архитектуры, который структурирует приложение как коллекцию сервисов, которые обмениваются данными между собой. Каждый сервис является самостоятельной единицей, которая предоставляет конкретную функциональность системе. Этот подход отличается от микросервисной архитектуры, которая является более тонкой и подразумевает развертывание каждого сервиса как отдельного процесса или единицы развертывания.

  В архитектуре, основанной на сервисах, сервисы обычно организуются вокруг бизнес-\_capability или доменов, и каждый сервис может состоять из нескольких компонентов или модулей. Этот подход позволяет создавать более модульные и масштабируемые системы, где каждый сервис может быть разработан, развернут и обслужен независимо.

  2. Использование одной базы данных, а также архивной базы данных для хранения резервной копии

  Мы используем одну базу данных, а именно MySQL, для хранения всех данных нашего приложения. MySQL - это популярная система управления реляционными базами данных, которая обеспечивает высокую производительность, надежность и масштабируемость.

  В дополнение к основной базе данных, мы также используем архивную базу данных для хранения резервных копий наших данных. Это критически важный аспект нашей системы, поскольку он обеспечивает возможность восстановления данных в случае сбоя или потери данных.

  Процесс сохранения резервных копий включает регулярное планирование задач резервного копирования, которые извлекают данные из основной базы данных и сохраняют их в архивной базе данных. Это может быть сделано с помощью различных инструментов и скриптов, таких как mysqldump или MySQL Enterprise Backup.

  Мы используем MySQL из-за его:

  высокой производительности и масштабируемости
  надежности и устойчивости к сбоям
  поддержки транзакций и соответствия стандарту ACID
  широкого спектра типов данных и опций индексирования
  обширной поддержки сообщества и документации
  3. Использование API-шлюзов в нашей системе

  API-шлюз - это единая точка входа для клиентов, чтобы получить доступ к нашим API. Он действует как обратный прокси, маршрутизируя входящие запросы к соответствующему сервису или микросервису. API-шлюз обеспечивает несколько преимуществ, включая:

  Безопасность: Он обеспечивает единую точку безопасности, такую как аутентификация и ограничение частоты запросов.
  Маршрутизация: Он маршрутизирует запросы к соответствующему сервису или микросервису, основываясь на URL и заголовках запроса.
  Кэширование: Он может кэшировать часто запрашиваемые данные, уменьшая нагрузку на наши сервисы и улучшая время ответа.
  Аналитика: Он может собирать метрики и аналитику использования API, помогающую нам оптимизировать нашу систему.
  В нашей системе API-шлюз отвечает за:

  аутентификацию входящих запросов с помощью токенов JWT
  маршрутизацию запросов к соответствующему сервису или микросервису
  кэширование часто запрашиваемых данных
  сбор метрик и аналитики использования API
  4. Выделение частей (сервисов) в рамках архитектуры, основанной на сервисах

  В нашей архитектуре, основанной на сервисах, мы разделяем наше приложение на отдельные сервисы, каждый из которых отвечает за конкретную бизнес-capability или домен. Это позволяет нам разрабатывать, развертывать и обслуживать каждый сервис независимо, не влияя на другие части системы.

  Мы разделяем наши сервисы на три слоя:

  Презентационный слой: Этот слой отвечает за обработку входящих запросов и возвращение ответов клиенту. Он включает API-шлюз, а также любые веб-приложения или мобильные приложения, которые взаимодействуют с нашими API.
  Слой приложения: Этот слой содержит бизнес-логику нашего приложения, включая сервисы, которые выполняют конкретные функции, такие как обработка платежей или выполнение заказов.
  Слой доступа к данным: Этот слой отвечает за доступ и манипуляцию данными в нашей базе данных. Он включает сервисы, которые взаимодействуют с базой данных, а также любые механизмы кэширования или индексирования данных.
  5. Использование
- токена JWT авторизации

  JSON Web Tokens (JWT) - это популярный механизм аутентификации, используемый для безопасной аутентификации клиентов и авторизации доступа к нашим API. Токен JWT - это компактный, безопасный способ представления утверждений, передаваемых между двумя сторонами.

  Вот как это работает:

  Когда клиент запрашивает доступ к нашему API, он предоставляет имя пользователя и пароль.
  Наш API-шлюз проверяет учетные данные и генерирует токен JWT, который содержит идентификатор клиента и любые соответствующие разрешения или роли.
  Клиент включает токен JWT в заголовок Authorization каждого последующего запроса.
  Наш API-шлюз проверяет токен JWT на каждом запросе, обеспечивая, что клиент имеет право доступа к запрашиваемому ресурсу.
  Мы используем токены JWT потому, что они обеспечивают несколько преимуществ, включая:

  Безопасность: Токены JWT защищены цифровой подписью, что делает их безопасными и защищенными от изменений.
  Масштабируемость: Токены JWT могут быть легко масштабированы, не требуя централизованного сервера аутентификации.
  Гибкость: Токены JWT могут быть использованы для представления широкого спектра утверждений и разрешений.
  6. Использование очередей при отправке заказа службе логистики или при оплате (передача данных)

  Очереди сообщений, такие как RabbitMQ или Apache Kafka, используются для декуплирования наших сервисов и обеспечения асинхронного обмена данными между ними. Когда клиент размещает заказ или производит оплату, мы используем очередь сообщений, чтобы отправить соответствующие данные в службу логистики или шлюз оплаты.

  Вот как это работает:

  Когда клиент размещает заказ, наш API-шлюз отправляет сообщение в очередь, содержащее данные о заказе.
  Служба логистики или шлюз оплаты извлекает сообщение из очереди, обрабатывает заказ или оплату, и отправляет ответ обратно в очередь.
  Наш API-шлюз извлекает ответ из очереди и возвращает результат клиенту.
  Мы используем очереди сообщений потому, что они обеспечивают несколько преимуществ, включая:

  Декуплирование: Очереди сообщений позволяют нашим сервисам работать независимо, не блокируя или ожидая друг друга.
  Масштабируемость: Очереди сообщений могут обрабатывать высокие объемы сообщений, что делает их идеальными для крупномасштабных систем.
  Гибкость: Очереди сообщений могут быть использованы для интеграции с широким спектром сервисов и систем.
  7. Использование представлений при запросе данных из базы данных

  Представления базы данных - это виртуальные таблицы, основанные на результате запроса. Они обеспечивают способ упрощения сложных запросов и улучшения производительности доступа к данным.

  В нашей системе мы используем представления базы данных, чтобы:

  Упростить сложные запросы: Создавая представление, которое объединяет данные из нескольких таблиц, мы можем упростить сложные запросы и улучшить производительность.
  Улучшить производительность доступа к данным: Представления могут быть проиндексированы, что улучшает производительность запросов и уменьшает нагрузку на нашу базу данных.
  Обеспечить слой абстракции: Представления могут скрывать сложную схему базы данных и обеспечивать более простой интерфейс для наших сервисов, чтобы получить доступ к данным.

  Например, мы можем создать представление, которое объединяет данные из таблиц заказов, клиентов и продуктов, обеспечивая единый интерфейс для наших сервисов, чтобы получить доступ к данным о заказе. Это упрощает запрос и улучшает производительность, а также обеспечивает слой абстракции между нашими сервисами и базой данных. 

